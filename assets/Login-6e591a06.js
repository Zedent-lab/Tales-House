import{r as l,u as G,a as $,b as O,j as e}from"./index-264089d6.js";import{c as m}from"./createLucideIcon-1e66801b.js";import{M as P}from"./mail-b154666f.js";import{E as C}from"./eye-8ae726a0.js";/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],W=m("circle-alert",V);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],S=m("eye-off",J);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],E=m("lock",T);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],K=m("user",U),se=()=>{var N,k;const[a,M]=l.useState(!0),[s,F]=l.useState({email:"",password:"",displayName:"",confirmPassword:""}),[p,z]=l.useState(!1),[x,A]=l.useState(!1),[f,t]=l.useState(""),[i,n]=l.useState(!1),[h,g]=l.useState(!1),[y,b]=l.useState(""),[w,j]=l.useState(""),{login:L,register:_,signInWithGoogle:q,resetPassword:I,user:v}=G(),c=$(),d=((k=(N=O().state)==null?void 0:N.from)==null?void 0:k.pathname)||"/";l.useEffect(()=>{v&&c(d,{replace:!0})},[v,c,d]);const u=r=>{F({...s,[r.target.name]:r.target.value}),t("")},B=()=>{if(!s.email||!s.password)return t("Please fill in all fields"),!1;if(!a){if(!s.displayName)return t("Please enter your name"),!1;if(s.password!==s.confirmPassword)return t("Passwords do not match"),!1;if(s.password.length<6)return t("Password must be at least 6 characters long"),!1}return!0},D=async r=>{if(r.preventDefault(),!!B()){n(!0),t("");try{let o;a?o=await L(s.email,s.password):o=await _(s.email,s.password,s.displayName),o.success?c(d,{replace:!0}):t(o.error)}catch{t("An unexpected error occurred. Please try again.")}finally{n(!1)}}},H=async()=>{n(!0),t("");try{const r=await q();r.success?c(d,{replace:!0}):t(r.error)}catch{t("Google sign-in failed. Please try again.")}finally{n(!1)}},R=async r=>{if(r.preventDefault(),!y){t("Please enter your email address");return}n(!0),t(""),j("");try{const o=await I(y);o.success?(j("Password reset email sent! Check your inbox."),g(!1),b("")):t(o.error)}catch{t("Failed to send password reset email. Please try again.")}finally{n(!1)}};return e.jsx("div",{className:"min-h-screen flex items-center justify-center px-4 py-12",children:e.jsxs("div",{className:"max-w-lg w-full space-y-8",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-3xl font-bold text-white mb-2",children:h?"Reset Password":a?"Welcome Back":"Create Account"}),e.jsx("p",{className:"text-gray-400",children:h?"Enter your email to receive a password reset link":a?"Sign in to your account":"Join the Tale House community"})]}),e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-10 rounded-2xl border border-gray-700",children:[f&&e.jsxs("div",{className:"mb-6 p-4 bg-red-500/10 border border-red-500/30 rounded-lg flex items-center gap-2 text-red-400",children:[e.jsx(W,{size:16}),e.jsx("span",{className:"text-sm",children:f})]}),w&&e.jsx("div",{className:"mb-6 p-4 bg-green-500/10 border border-green-500/30 rounded-lg text-green-400 text-sm",children:w}),h?e.jsxs("form",{onSubmit:R,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Email Address"}),e.jsxs("div",{className:"relative",children:[e.jsx(P,{className:"absolute left-3 top-3 h-5 w-5 text-gray-400"}),e.jsx("input",{type:"email",value:y,onChange:r=>b(r.target.value),className:"w-full pl-10 pr-4 py-3 bg-gray-700/50 border border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent text-white placeholder-gray-400",placeholder:"Enter your email",required:!0})]})]}),e.jsx("button",{type:"submit",disabled:i,className:"w-full bg-purple-600 hover:bg-purple-700 disabled:opacity-50 disabled:cursor-not-allowed text-white font-semibold py-3 px-4 rounded-lg transition duration-200",children:i?"Sending...":"Send Reset Email"}),e.jsx("button",{type:"button",onClick:()=>g(!1),className:"w-full text-gray-400 hover:text-white transition duration-200",children:"Back to Login"})]}):e.jsxs(e.Fragment,{children:[e.jsxs("form",{onSubmit:D,className:"space-y-6",children:[!a&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Full Name"}),e.jsxs("div",{className:"relative",children:[e.jsx(K,{className:"absolute left-3 top-3 h-5 w-5 text-gray-400"}),e.jsx("input",{type:"text",name:"displayName",value:s.displayName,onChange:u,className:"w-full pl-10 pr-4 py-3 bg-gray-700/50 border border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent text-white placeholder-gray-400",placeholder:"Enter your full name",required:!0})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Email Address"}),e.jsxs("div",{className:"relative",children:[e.jsx(P,{className:"absolute left-3 top-3 h-5 w-5 text-gray-400"}),e.jsx("input",{type:"email",name:"email",value:s.email,onChange:u,className:"w-full pl-10 pr-4 py-3 bg-gray-700/50 border border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent text-white placeholder-gray-400",placeholder:"Enter your email",required:!0})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(E,{className:"absolute left-3 top-3 h-5 w-5 text-gray-400"}),e.jsx("input",{type:p?"text":"password",name:"password",value:s.password,onChange:u,className:"w-full pl-10 pr-10 py-3 bg-gray-700/50 border border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent text-white placeholder-gray-400",placeholder:"Enter your password",required:!0}),e.jsx("button",{type:"button",onClick:()=>z(!p),className:"absolute right-3 top-3 text-gray-400 hover:text-white",children:p?e.jsx(S,{size:20}):e.jsx(C,{size:20})})]})]}),!a&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Confirm Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(E,{className:"absolute left-3 top-3 h-5 w-5 text-gray-400"}),e.jsx("input",{type:x?"text":"password",name:"confirmPassword",value:s.confirmPassword,onChange:u,className:"w-full pl-10 pr-10 py-3 bg-gray-700/50 border border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent text-white placeholder-gray-400",placeholder:"Confirm your password",required:!0}),e.jsx("button",{type:"button",onClick:()=>A(!x),className:"absolute right-3 top-3 text-gray-400 hover:text-white",children:x?e.jsx(S,{size:20}):e.jsx(C,{size:20})})]})]}),a&&e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{type:"button",onClick:()=>g(!0),className:"text-sm text-purple-400 hover:text-purple-300 transition duration-200",children:"Forgot your password?"})}),e.jsx("button",{type:"submit",disabled:i,className:"w-full bg-purple-600 hover:bg-purple-700 disabled:opacity-50 disabled:cursor-not-allowed text-white font-semibold py-3 px-4 rounded-lg transition duration-200",children:i?"Processing...":a?"Sign In":"Create Account"})]}),e.jsxs("div",{className:"relative my-8",children:[e.jsx("div",{className:"absolute inset-0 flex items-center",children:e.jsx("div",{className:"w-full border-t border-gray-600"})}),e.jsx("div",{className:"relative flex justify-center text-sm",children:e.jsx("span",{className:"px-2 bg-gray-800 text-gray-400",children:"Or continue with"})})]}),e.jsx("div",{className:"space-y-4",children:e.jsxs("button",{onClick:H,disabled:i,className:"w-full bg-white hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed text-gray-800 font-semibold py-3 px-4 rounded-lg transition duration-200 flex items-center justify-center gap-3",children:[e.jsxs("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",children:[e.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),e.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),e.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),e.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"Sign in with Google"]})}),e.jsx("div",{className:"text-center mt-8",children:e.jsxs("button",{type:"button",onClick:()=>M(!a),className:"text-gray-400 hover:text-white transition duration-200",children:[a?"Don't have an account? ":"Already have an account? ",e.jsx("span",{className:"text-purple-400 hover:text-purple-300",children:a?"Sign up":"Sign in"})]})})]})]})]})})};export{se as default};
